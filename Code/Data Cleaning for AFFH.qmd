---
title: "Untitled"
format: html
---

```{python}
import geopandas as gpd
import altair as alt
import pandas as pd
import numpy as np
import time
from pathlib import Path

PROJECT_ROOT = Path.cwd()

if not (PROJECT_ROOT / "Data").exists():
    PROJECT_ROOT = PROJECT_ROOT.parent

DER_DATA_DIR = PROJECT_ROOT / "Data" / "Derived_Data"
TRACT_DIR = PROJECT_ROOT / "Data" / "Derived_Data" / "tl_2025_17_tract"
RAW_DATA_DIR = PROJECT_ROOT / "Data" /"Raw_Data/data_center_geodata/im3_open_source_data_center_atlas"

print("Project root:", PROJECT_ROOT)

path_to_affh = DER_DATA_DIR / "housing_illinois_only.csv"

df_affh = pd.read_csv(path_to_affh, encoding="latin-1")
df_affh

path_to_atlas = RAW_DATA_DIR / "im3_open_source_data_center_atlas.csv"
df_atlas = pd.read_csv(path_to_atlas)
df_atlas

tracts_path = TRACT_DIR / "tl_2025_17_tract.shp"
tracts = gpd.read_file(tracts_path)
tracts

tracts["GEOID"] = tracts["GEOID"].astype(int)
gdf_merged = tracts.merge(df_affh, left_on="GEOID", right_on="geoid", how="inner")
gdf_merged
```
